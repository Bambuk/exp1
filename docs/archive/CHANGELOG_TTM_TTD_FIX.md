# Changelog: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∏–∑—ä—è–Ω–æ–≤ TTM –∏ TTD

**–î–∞—Ç–∞:** 2025-10-06

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ #1: –†–∞—Å—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞—Å—á–µ—Ç–µ Pause Time –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ß—Ç–æ –±—ã–ª–æ:**
–í –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á (`generate_time_to_market_report.py`, —Å—Ç—Ä–æ–∫–∏ 160 –∏ 183) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –º–µ—Ç–æ–¥ `calculate_pause_time(history)`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–ª **–ø–æ–ª–Ω–æ–µ** –≤—Ä–µ–º—è –ø–∞—É–∑—ã –¥–ª—è –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–¥–∞—á–∏, –≤–∫–ª—é—á–∞—è –ø–∞—É–∑—ã **–ø–æ—Å–ª–µ** –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.

–ü—Ä–∏ —ç—Ç–æ–º –≤ –º–µ—Ç–æ–¥–∞—Ö `calculate_time_to_delivery` –∏ `calculate_time_to_market` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `calculate_pause_time_up_to_date`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Ç–∞–ª –ø–∞—É–∑—ã —Ç–æ–ª—å–∫–æ –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- TTD/TTM –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–∞—É–∑—ã
- –ù–æ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É `pause_times` –ø–æ–ø–∞–¥–∞–ª–æ –∑–∞–≤—ã—à–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—é—â–µ–µ –ø–∞—É–∑—ã –ø–æ—Å–ª–µ —Ü–µ–ª–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- –ú–µ—Ç—Ä–∏–∫–∏ `pause_mean` –∏ `pause_p85` –≤ –æ—Ç—á–µ—Ç–∞—Ö –±—ã–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `generate_time_to_market_report.py`:

**–î–ª—è TTD –∑–∞–¥–∞—á (—Å—Ç—Ä–æ–∫–∏ 159-178):**
```python
# –¢–µ–ø–µ—Ä—å –≤—ã—á–∏—Å–ª—è–µ–º pause time —Ç–æ–ª—å–∫–æ –¥–æ "–ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
ttd = self.metrics_service.calculate_time_to_delivery(
    history, status_mapping.discovery_statuses
)
if ttd is not None:
    # –ù–∞—Ö–æ–¥–∏–º –¥–∞—Ç—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ "–ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
    sorted_history = sorted(history, key=lambda x: x.start_date)
    ttd_target_date = None
    for entry in sorted_history:
        if entry.status == "–ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ":
            ttd_target_date = entry.start_date
            break

    # –í—ã—á–∏—Å–ª—è–µ–º pause time –¢–û–õ–¨–ö–û –¥–æ —ç—Ç–æ–π –¥–∞—Ç—ã
    pause_time = self.metrics_service.calculate_pause_time_up_to_date(
        history, ttd_target_date
    ) if ttd_target_date else 0

    group_data[group_value]["ttd_times"].append(ttd)
    group_data[group_value]["ttd_pause_times"].append(pause_time)
```

**–î–ª—è TTM –∑–∞–¥–∞—á (—Å—Ç—Ä–æ–∫–∏ 192-211):**
```python
# –¢–µ–ø–µ—Ä—å –≤—ã—á–∏—Å–ª—è–µ–º pause time —Ç–æ–ª—å–∫–æ –¥–æ –ø–µ—Ä–≤–æ–≥–æ done —Å—Ç–∞—Ç—É—Å–∞
ttm = self.metrics_service.calculate_time_to_market(
    history, status_mapping.done_statuses
)
if ttm is not None:
    # –ù–∞—Ö–æ–¥–∏–º –¥–∞—Ç—É –ø–µ—Ä–≤–æ–≥–æ done —Å—Ç–∞—Ç—É—Å–∞
    sorted_history = sorted(history, key=lambda x: x.start_date)
    ttm_target_date = None
    for entry in sorted_history:
        if entry.status in status_mapping.done_statuses:
            ttm_target_date = entry.start_date
            break

    # –í—ã—á–∏—Å–ª—è–µ–º pause time –¢–û–õ–¨–ö–û –¥–æ —ç—Ç–æ–π –¥–∞—Ç—ã
    pause_time = self.metrics_service.calculate_pause_time_up_to_date(
        history, ttm_target_date
    ) if ttm_target_date else 0

    group_data[group_value]["ttm_times"].append(ttm)
    group_data[group_value]["ttm_pause_times"].append(pause_time)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ `pause_mean` –∏ `pause_p85` —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **—Ä–µ–∞–ª—å–Ω–æ –≤—ã—á—Ç–µ–Ω–Ω–æ–º—É** pause time –∏–∑ TTD/TTM
- –î–∞–Ω–Ω—ã–µ –≤ –æ—Ç—á–µ—Ç–∞—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã

---

### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ #2: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ total_tasks

**–ß—Ç–æ –±—ã–ª–æ:**
–í –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º –≤—ã–≤–æ–¥–µ (`console_renderer.py`, —Å—Ç—Ä–æ–∫–∞ 143) –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å:
```python
print(f"Total tasks analyzed: {self.report.total_tasks}")
```

–ì–¥–µ `total_tasks = ttd_metrics.count + ttm_metrics.count`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ–¥—Å—á–µ—Ç—É –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ –¥–≤–∞–∂–¥—ã, –µ—Å–ª–∏ –æ–Ω–∞:
- –ü–µ—Ä–µ—à–ª–∞ –≤ "–ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" –≤ Q1 (—É—á—Ç–µ–Ω–∞ –≤ ttd_metrics)
- –ü–µ—Ä–µ—à–ª–∞ –≤ "Done" –≤ Q2 (—É—á—Ç–µ–Ω–∞ –≤ ttm_metrics)

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
–£–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å –≤—ã–≤–æ–¥–æ–º `total_tasks` –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ (`console_renderer.py`, —Å—Ç—Ä–æ–∫–∞ 143).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –±–æ–ª—å—à–µ –Ω–µ –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ
- –í CSV/—Ç–∞–±–ª–∏—Ü–∞—Ö –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏** –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏ (ttd_tasks, ttm_tasks), –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –≤ `tests/test_pause_time_metrics.py`:

### 1. `test_pause_time_up_to_date_excludes_later_pauses`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `calculate_pause_time_up_to_date` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –ø–∞—É–∑—ã –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã:
- –ü–∞—É–∑–∞ –î–û —Ü–µ–ª–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞: —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è ‚úÖ
- –ü–∞—É–∑–∞ –ü–û–°–õ–ï —Ü–µ–ª–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞: –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è ‚úÖ

### 2. `test_pause_time_statistics_match_calculation`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:
- TTD –≤—ã—á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ pause time
- Pause time –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤—ã—á—Ç–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
- TTM –≤—ã—á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ pause time (–≤–∫–ª—é—á–∞—è –æ–±–µ –ø–∞—É–∑—ã)
- Pause time –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤—ã—á—Ç–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤:**
```
======================= 13 passed, 29 warnings in 0.47s ========================
```
–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ ‚úÖ

---

## –ß—Ç–æ –ù–ï –º–µ–Ω—è–ª–æ—Å—å (–ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é)

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –≤ –æ–¥–∏–Ω —Å—Ç–∞—Ç—É—Å
–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–±—Ä–∞—Ç—å **–ø–µ—Ä–≤—ã–π** –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ü–µ–ª–µ–≤–æ–π —Å—Ç–∞—Ç—É—Å) –ø—Ä–∏–∑–Ω–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Å –±–∏–∑–Ω–µ—Å-—Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∏ –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–≤–∞—Ä—Ç–∞–ª–∞ –¥–ª—è –∑–∞–¥–∞—á–∏
–î–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏ –∫–≤–∞—Ä—Ç–∞–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ **—Å–≤–æ–µ–º—É** —Å–æ–±—ã—Ç–∏—é:
- TTD: –ø–æ –¥–∞—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ "–ì–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
- TTM: –ø–æ –¥–∞—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ done —Å—Ç–∞—Ç—É—Å

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ.

### task_details_csv
–ù–µ –º–µ–Ω—è–ª–æ—Å—å –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é.

---

## –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `radiator/commands/generate_time_to_market_report.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç pause time
2. ‚úÖ `radiator/commands/renderers/console_renderer.py` - —É–¥–∞–ª–µ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–≤–æ–¥
3. ‚úÖ `tests/test_pause_time_metrics.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
4. üìÑ `ANALYSIS_TTM_TTD_LOGIC_FLAWS.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º
5. üìÑ `CHANGELOG_TTM_TTD_FIX.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–ü–µ—Ä–µ—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã** - —Å—Ç–∞—Ä—ã–µ –æ—Ç—á–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ pause time
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** - –∑–Ω–∞—á–µ–Ω–∏—è `pause_mean` –∏ `pause_p85` —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏–º
3. **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫** - pause time –≤ –æ—Ç—á–µ—Ç–∞—Ö —Ç–µ–ø–µ—Ä—å —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–º—É, —á—Ç–æ –±—ã–ª–æ –≤—ã—á—Ç–µ–Ω–æ –∏–∑ TTD/TTM

---

## Backward Compatibility

‚ö†Ô∏è **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤:**
- –ó–Ω–∞—á–µ–Ω–∏—è `pause_mean` –∏ `pause_p85` –∏–∑–º–µ–Ω—è—Ç—Å—è (—É–º–µ–Ω—å—à–∞—Ç—Å—è)
- TTD/TTM –∑–Ω–∞—á–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** (–æ–Ω–∏ –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è (—É–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å total_tasks)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ï—Å–ª–∏ –µ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã.
